  [1m[35m (0.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "rinha_database"[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "rinha_database"[0m
  [1m[35m (52.7ms)[0m  [1m[35mCREATE DATABASE "rinha_database" ENCODING = 'unicode'[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE DATABASE "rinha_database" ENCODING = 'unicode'[0m
  [1m[35m (58.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "rinha_database"[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "rinha_database_test"[0m
  [1m[35m (44.3ms)[0m  [1m[35mCREATE DATABASE "rinha_database" ENCODING = 'unicode'[0m
  [1m[35m (39.7ms)[0m  [1m[35mCREATE DATABASE "rinha_database_test" ENCODING = 'unicode'[0m
  [1m[35m (14.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (13.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2449168281136578540)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateAccounts (20240216124151)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.9ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" bigserial primary key, "client_id" integer, "balance" integer, "limit" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_accounts_on_client_id" ON "accounts" ("client_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240216124151"]]
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateTransactions (20240216124312)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (12.8ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "amount" integer, "kind" integer, "description" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240216124312"]]
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2024-02-16 14:06:52.238815"], ["updated_at", "2024-02-16 14:06:52.238815"]]
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(2449168281136578540)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (5005.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "rinha_database"[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (649.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "rinha_database"[0m
  [1m[35m (50.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "rinha_database_test"[0m
  [1m[35m (38.3ms)[0m  [1m[35mCREATE DATABASE "rinha_database" ENCODING = 'unicode'[0m
  [1m[35m (44.2ms)[0m  [1m[35mCREATE DATABASE "rinha_database_test" ENCODING = 'unicode'[0m
Started POST "/clientes/1/transacoes" for ::1 at 2024-02-16 11:15:31 -0300
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "client_id"=>"1", "transaction"=>{}}
Completed 422 Unprocessable Entity in 13ms (Views: 0.3ms | ActiveRecord: 2.0ms | Allocations: 6541)


Started POST "/clientes/1/transacoes" for ::1 at 2024-02-16 11:16:05 -0300
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "client_id"=>"1", "transaction"=>{}}
Completed 422 Unprocessable Entity in 8ms (Views: 0.2ms | ActiveRecord: 1.9ms | Allocations: 4995)


Started POST "/clientes/1/transacoes" for ::1 at 2024-02-16 11:17:39 -0300
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
Completed 422 Unprocessable Entity in 7ms (Views: 0.2ms | ActiveRecord: 2.0ms | Allocations: 4960)


Started POST "/clientes/1/transacoes" for ::1 at 2024-02-16 11:17:52 -0300
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.6ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
Completed 404 Not Found in 17ms (Views: 0.2ms | ActiveRecord: 7.0ms | Allocations: 6287)


  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (65.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "rinha_database"[0m
  [1m[35m (51.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "rinha_database_test"[0m
  [1m[36mAccount Load (0.7ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  [1m[36mAccount Load (0.7ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mAccount Create (0.8ms)[0m  [1m[32mINSERT INTO "accounts" ("client_id", "balance", "limit", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["client_id", 1], ["balance", 0], ["limit", 100000], ["created_at", "2024-02-16 14:25:35.915426"], ["updated_at", "2024-02-16 14:25:35.915426"]]
  [1m[36mTRANSACTION (8.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mAccount Create (0.4ms)[0m  [1m[32mINSERT INTO "accounts" ("client_id", "balance", "limit", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["client_id", 2], ["balance", 0], ["limit", 80000], ["created_at", "2024-02-16 14:25:35.927912"], ["updated_at", "2024-02-16 14:25:35.927912"]]
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mAccount Create (0.3ms)[0m  [1m[32mINSERT INTO "accounts" ("client_id", "balance", "limit", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["client_id", 3], ["balance", 0], ["limit", 1000000], ["created_at", "2024-02-16 14:25:35.933319"], ["updated_at", "2024-02-16 14:25:35.933319"]]
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mAccount Create (0.4ms)[0m  [1m[32mINSERT INTO "accounts" ("client_id", "balance", "limit", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["client_id", 4], ["balance", 0], ["limit", 10000000], ["created_at", "2024-02-16 14:25:35.938625"], ["updated_at", "2024-02-16 14:25:35.938625"]]
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mAccount Create (0.3ms)[0m  [1m[32mINSERT INTO "accounts" ("client_id", "balance", "limit", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["client_id", 5], ["balance", 0], ["limit", 500000], ["created_at", "2024-02-16 14:25:35.943828"], ["updated_at", "2024-02-16 14:25:35.943828"]]
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
Started POST "/clientes/1/transacoes" for ::1 at 2024-02-16 11:26:41 -0300
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.6ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :valor, :tipo, :descricao, :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5b2c0b5e80>, params: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :valor, :tipo, :descricao, :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5b2c0b5e80>, params: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :valor, :tipo, :descricao, :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5b2c0b5e80>, params: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.6ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 422 Unprocessable Entity in 33ms (Views: 0.2ms | ActiveRecord: 9.2ms | Allocations: 16813)


Started POST "/clientes/1/transacoes" for ::1 at 2024-02-16 11:27:33 -0300
  [1m[36mActiveRecord::SchemaMigration Pluck (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.7ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :valor, :tipo, :descricao, :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f7251649d60>, params: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :valor, :tipo, :descricao, :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f7251649d60>, params: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :valor, :tipo, :descricao, :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f7251649d60>, params: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 422 Unprocessable Entity in 41ms (Views: 0.2ms | ActiveRecord: 9.3ms | Allocations: 21355)


Started POST "/clientes/1/transacoes" for ::1 at 2024-02-16 11:28:17 -0300
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.6ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :valor, :tipo, :descricao, :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f60a969dff0>, params: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :valor, :tipo, :descricao, :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f60a969dff0>, params: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :valor, :tipo, :descricao, :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f60a969dff0>, params: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.5ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 422 Unprocessable Entity in 38ms (Views: 0.3ms | ActiveRecord: 9.2ms | Allocations: 18553)


Started POST "/clientes/1/transacoes" for ::1 at 2024-02-16 11:28:19 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.5ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :valor, :tipo, :descricao, :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f60a919a530>, params: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :valor, :tipo, :descricao, :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f60a919a530>, params: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :valor, :tipo, :descricao, :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f60a919a530>, params: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.5ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 422 Unprocessable Entity in 8ms (Views: 0.1ms | ActiveRecord: 2.0ms | Allocations: 5196)


  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (55.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "rinha_database"[0m
  [1m[35m (51.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "rinha_database_test"[0m
Started POST "/clientes/1/transacoes" for ::1 at 2024-02-16 11:30:59 -0300
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.7ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :valor, :tipo, :descricao, :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007fbdd9bdb138>, params: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :valor, :tipo, :descricao, :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007fbdd9bdb138>, params: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :valor, :tipo, :descricao, :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007fbdd9bdb138>, params: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.5ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 422 Unprocessable Entity in 37ms (Views: 0.3ms | ActiveRecord: 8.9ms | Allocations: 18448)


Started POST "/clientes/1/transacoes" for ::1 at 2024-02-16 11:31:02 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :valor, :tipo, :descricao, :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007fbdd96e7b40>, params: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :valor, :tipo, :descricao, :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007fbdd96e7b40>, params: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :valor, :tipo, :descricao, :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007fbdd96e7b40>, params: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.6ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 422 Unprocessable Entity in 8ms (Views: 0.1ms | ActiveRecord: 2.0ms | Allocations: 5196)


Started POST "/clientes/1/transacoes" for ::1 at 2024-02-16 11:32:15 -0300
  [1m[36mActiveRecord::SchemaMigration Pluck (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.6ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007ff64c0123f0>, params: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007ff64c0123f0>, params: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007ff64c0123f0>, params: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.7ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.5ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 422 Unprocessable Entity in 41ms (Views: 0.3ms | ActiveRecord: 10.7ms | Allocations: 18459)


Started POST "/clientes/1/transacoes" for ::1 at 2024-02-16 11:32:42 -0300
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.7ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:31:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f640a96e2c0>, params: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f640a96e2c0>, params: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f640a96e2c0>, params: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.7ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.5ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 422 Unprocessable Entity in 35ms (Views: 0.2ms | ActiveRecord: 9.3ms | Allocations: 18458)


Started POST "/clientes/1/transacoes" for ::1 at 2024-02-16 11:32:43 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:31:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f640a47ae30>, params: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f640a47ae30>, params: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f640a47ae30>, params: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.5ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 422 Unprocessable Entity in 9ms (Views: 0.2ms | ActiveRecord: 2.0ms | Allocations: 5198)


Started POST "/clientes/1/transacoes" for ::1 at 2024-02-16 11:32:52 -0300
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.5ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:33:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007fda50065f40>, params: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007fda50065f40>, params: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007fda50065f40>, params: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.5ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 500 Internal Server Error in 34ms (ActiveRecord: 8.9ms | Allocations: 18284)


  
BaseException (can't write unknown attribute `account_id`

          raise ActiveModel::MissingAttributeError, "can't write unknown attribute `#{name}`"
          ^^^^^):
  
app/use_cases/create_transaction_use_case.rb:32:in `rescue in call'
app/use_cases/create_transaction_use_case.rb:27:in `call'
app/controllers/transactions_controller.rb:13:in `create'
Started POST "/clientes/1/transacoes" for ::1 at 2024-02-16 11:34:16 -0300
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.7ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:33:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f08dd056080>, params: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f08dd056080>, params: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f08dd056080>, params: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 500 Internal Server Error in 37ms (ActiveRecord: 9.5ms | Allocations: 18303)


  
ActiveModel::MissingAttributeError (can't write unknown attribute `account_id`

          raise ActiveModel::MissingAttributeError, "can't write unknown attribute `#{name}`"
          ^^^^^):
  
app/use_cases/create_transaction_use_case.rb:46:in `create_transaction'
app/use_cases/create_transaction_use_case.rb:20:in `block in call'
app/use_cases/create_transaction_use_case.rb:16:in `call'
app/controllers/transactions_controller.rb:13:in `create'
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (5005.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "rinha_database"[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (690.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "rinha_database"[0m
  [1m[35m (51.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "rinha_database_test"[0m
  [1m[35m (47.9ms)[0m  [1m[35mCREATE DATABASE "rinha_database" ENCODING = 'unicode'[0m
  [1m[35m (37.3ms)[0m  [1m[35mCREATE DATABASE "rinha_database_test" ENCODING = 'unicode'[0m
  [1m[35m (15.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (13.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2449168281136578540)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateAccounts (20240216124151)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.1ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" bigserial primary key, "client_id" integer, "balance" integer DEFAULT 0 NOT NULL, "limit" integer DEFAULT 0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_accounts_on_client_id" ON "accounts" ("client_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240216124151"]]
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateTransactions (20240216124312)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "account_id" integer NOT NULL, "amount" integer NOT NULL, "kind" integer NOT NULL, "description" character varying(10) NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_account_id" ON "transactions" ("account_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240216124312"]]
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2024-02-16 14:36:23.209046"], ["updated_at", "2024-02-16 14:36:23.209046"]]
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(2449168281136578540)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (661.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "rinha_database"[0m
  [1m[35m (51.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "rinha_database_test"[0m
Started POST "/clientes/1/transacoes" for ::1 at 2024-02-16 11:37:27 -0300
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.5ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:33:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f110414ccf8>, params: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f110414ccf8>, params: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f110414ccf8>, params: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 500 Internal Server Error in 46ms (ActiveRecord: 9.0ms | Allocations: 23052)


  
NoMethodError (undefined method `value' for #<Transaction id: nil, account_id: 1, amount: 1000, kind: "c", description: "descricao", created_at: nil, updated_at: nil>
Did you mean?  values_at):
  
app/use_cases/create_transaction_use_case.rb:46:in `create_transaction'
app/use_cases/create_transaction_use_case.rb:20:in `block in call'
app/use_cases/create_transaction_use_case.rb:16:in `call'
app/controllers/transactions_controller.rb:13:in `create'
Started POST "/clientes/1/transacoes" for ::1 at 2024-02-16 11:37:29 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:33:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f10e72777f8>, params: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f10e72777f8>, params: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f10e72777f8>, params: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 500 Internal Server Error in 12ms (ActiveRecord: 1.9ms | Allocations: 9011)


  
NoMethodError (undefined method `value' for #<Transaction id: nil, account_id: 1, amount: 1000, kind: "c", description: "descricao", created_at: nil, updated_at: nil>
Did you mean?  values_at):
  
app/use_cases/create_transaction_use_case.rb:46:in `create_transaction'
app/use_cases/create_transaction_use_case.rb:20:in `block in call'
app/use_cases/create_transaction_use_case.rb:16:in `call'
app/controllers/transactions_controller.rb:13:in `create'
Started POST "/clientes/1/transacoes" for ::1 at 2024-02-16 11:38:08 -0300
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.6ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:33:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007efe34160560>, params: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007efe34160560>, params: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007efe34160560>, params: {"valor"=>1000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.5ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.9ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 1000], ["kind", 0], ["description", "descricao"], ["created_at", "2024-02-16 14:38:08.334198"], ["updated_at", "2024-02-16 14:38:08.334198"]]
  â†³ app/use_cases/create_transaction_use_case.rb:46:in `create_transaction'
  [1m[36mAccount Update (0.5ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance", 1000], ["updated_at", "2024-02-16 14:38:08.337044"], ["id", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:23:in `block in call'
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 200 OK in 45ms (Views: 0.3ms | ActiveRecord: 13.7ms | Allocations: 19954)


  [1m[36mTransaction Load (0.9ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions"[0m
  [1m[36mTransaction Load (0.5ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" ORDER BY "transactions"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mAccount Load (0.5ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Started POST "/clientes/1/transacoes" for ::1 at 2024-02-16 11:42:41 -0300
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>101001, "tipo"=>"c", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.7ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:33:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f99b20090f8>, params: {"valor"=>101001, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f99b20090f8>, params: {"valor"=>101001, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f99b20090f8>, params: {"valor"=>101001, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.5ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.9ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 101001], ["kind", 0], ["description", "descricao"], ["created_at", "2024-02-16 14:42:41.579364"], ["updated_at", "2024-02-16 14:42:41.579364"]]
  â†³ app/use_cases/create_transaction_use_case.rb:46:in `create_transaction'
  [1m[36mAccount Update (0.5ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance", 102001], ["updated_at", "2024-02-16 14:42:41.582141"], ["id", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:23:in `block in call'
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 200 OK in 44ms (Views: 0.3ms | ActiveRecord: 13.3ms | Allocations: 19835)


Started POST "/clientes/1/transacoes" for ::1 at 2024-02-16 11:42:53 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>101001, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:33:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f99b1b379f8>, params: {"valor"=>101001, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f99b1b379f8>, params: {"valor"=>101001, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f99b1b379f8>, params: {"valor"=>101001, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.4ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 101001], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 14:42:53.037827"], ["updated_at", "2024-02-16 14:42:53.037827"]]
  â†³ app/use_cases/create_transaction_use_case.rb:46:in `create_transaction'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 422 Unprocessable Entity in 19ms (ActiveRecord: 2.1ms | Allocations: 6753)


  
ActiveRecord::RecordInvalid (Validation failed: Balance Saldo nÃ£o pode ser menor que o limite):
  
app/use_cases/create_transaction_use_case.rb:23:in `block in call'
app/use_cases/create_transaction_use_case.rb:16:in `call'
app/controllers/transactions_controller.rb:13:in `create'
Started POST "/clientes/1/transacoes" for ::1 at 2024-02-16 11:43:18 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>101001, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:33:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f99b19716a0>, params: {"valor"=>101001, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f99b19716a0>, params: {"valor"=>101001, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f99b19716a0>, params: {"valor"=>101001, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.4ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 101001], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 14:43:18.338772"], ["updated_at", "2024-02-16 14:43:18.338772"]]
  â†³ app/use_cases/create_transaction_use_case.rb:46:in `create_transaction'
  [1m[36mAccount Update (0.6ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance", 1000], ["updated_at", "2024-02-16 14:43:18.341310"], ["id", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:23:in `block in call'
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 200 OK in 25ms (Views: 0.2ms | ActiveRecord: 10.8ms | Allocations: 10434)


Started POST "/clientes/1/transacoes" for ::1 at 2024-02-16 11:43:28 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1000, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.5ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:33:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f99b18bc638>, params: {"valor"=>1000, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f99b18bc638>, params: {"valor"=>1000, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f99b18bc638>, params: {"valor"=>1000, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.5ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.4ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 1000], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 14:43:28.946331"], ["updated_at", "2024-02-16 14:43:28.946331"]]
  â†³ app/use_cases/create_transaction_use_case.rb:46:in `create_transaction'
  [1m[36mAccount Update (0.5ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance", 0], ["updated_at", "2024-02-16 14:43:28.947866"], ["id", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:23:in `block in call'
  [1m[36mTRANSACTION (3.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 200 OK in 14ms (Views: 0.2ms | ActiveRecord: 6.0ms | Allocations: 4912)


Started POST "/clientes/1/transacoes" for ::1 at 2024-02-16 11:43:33 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>100000, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:33:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f99b18807f0>, params: {"valor"=>100000, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f99b18807f0>, params: {"valor"=>100000, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f99b18807f0>, params: {"valor"=>100000, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.5ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.5ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.5ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 100000], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 14:43:33.912549"], ["updated_at", "2024-02-16 14:43:33.912549"]]
  â†³ app/use_cases/create_transaction_use_case.rb:46:in `create_transaction'
  [1m[36mAccount Update (0.8ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance", -100000], ["updated_at", "2024-02-16 14:43:33.914266"], ["id", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:23:in `block in call'
  [1m[36mTRANSACTION (8.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 200 OK in 20ms (Views: 0.2ms | ActiveRecord: 11.7ms | Allocations: 4856)


Started POST "/clientes/1/transacoes" for ::1 at 2024-02-16 11:43:40 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:33:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f99b1845e70>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f99b1845e70>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f99b1845e70>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.5ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.5ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 1], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 14:43:40.195193"], ["updated_at", "2024-02-16 14:43:40.195193"]]
  â†³ app/use_cases/create_transaction_use_case.rb:46:in `create_transaction'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 422 Unprocessable Entity in 10ms (ActiveRecord: 2.4ms | Allocations: 4554)


  
ActiveRecord::RecordInvalid (Validation failed: Balance Saldo nÃ£o pode ser menor que o limite):
  
app/use_cases/create_transaction_use_case.rb:23:in `block in call'
app/use_cases/create_transaction_use_case.rb:16:in `call'
app/controllers/transactions_controller.rb:13:in `create'
Started POST "/clientes/1/transacoes" for ::1 at 2024-02-16 11:43:54 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:33:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f99b1bad9a0>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f99b1bad9a0>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f99b1bad9a0>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.5ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.6ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 1], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 14:43:54.458809"], ["updated_at", "2024-02-16 14:43:54.458809"]]
  â†³ app/use_cases/create_transaction_use_case.rb:46:in `create_transaction'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 422 Unprocessable Entity in 22ms (ActiveRecord: 8.3ms | Allocations: 9903)


  
ActiveRecord::RecordInvalid (Validation failed: Saldo nÃ£o pode ser menor que o limite):
  
app/use_cases/create_transaction_use_case.rb:23:in `block in call'
app/use_cases/create_transaction_use_case.rb:16:in `call'
app/controllers/transactions_controller.rb:13:in `create'
Started POST "/clientes/1/transacoes" for ::1 at 2024-02-16 11:45:01 -0300
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.6ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007fd328023cf0>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007fd328023cf0>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007fd328023cf0>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.6ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.7ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 1], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 14:45:01.859135"], ["updated_at", "2024-02-16 14:45:01.859135"]]
  â†³ app/use_cases/create_transaction_use_case.rb:44:in `create_transaction'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 422 Unprocessable Entity in 40ms (Views: 0.3ms | ActiveRecord: 9.9ms | Allocations: 20102)


Started POST "/clientes/1/transacoes" for ::1 at 2024-02-16 11:45:35 -0300
  [1m[36mActiveRecord::SchemaMigration Pluck (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.7ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5250033f50>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5250033f50>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5250033f50>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.5ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.8ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 1], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 14:45:36.135859"], ["updated_at", "2024-02-16 14:45:36.135859"]]
  â†³ app/use_cases/create_transaction_use_case.rb:44:in `create_transaction'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 422 Unprocessable Entity in 41ms (Views: 0.3ms | ActiveRecord: 10.3ms | Allocations: 20112)


Started POST "/clientes/1/transacoes" for ::1 at 2024-02-16 11:45:42 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>0, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f523af220b8>, params: {"valor"=>0, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f523af220b8>, params: {"valor"=>0, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f523af220b8>, params: {"valor"=>0, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 422 Unprocessable Entity in 9ms (Views: 0.1ms | ActiveRecord: 1.7ms | Allocations: 4339)


Started POST "/clientes/1/transacoes" for ::1 at 2024-02-16 11:46:19 -0300
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>0, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.6ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007fc6c802ba20>, params: {"valor"=>0, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007fc6c802ba20>, params: {"valor"=>0, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007fc6c802ba20>, params: {"valor"=>0, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.6ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.5ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 422 Unprocessable Entity in 39ms (Views: 0.2ms | ActiveRecord: 9.5ms | Allocations: 19148)


Started POST "/clientes/1/transacoes" for ::1 at 2024-02-16 11:46:21 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>0, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007fc6a3927518>, params: {"valor"=>0, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007fc6a3927518>, params: {"valor"=>0, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007fc6a3927518>, params: {"valor"=>0, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 422 Unprocessable Entity in 7ms (Views: 0.1ms | ActiveRecord: 1.7ms | Allocations: 4197)


Started POST "/clientes/1/transacoes" for ::1 at 2024-02-16 11:46:22 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.5ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007fc6a38f2688>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007fc6a38f2688>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007fc6a38f2688>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.5ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.7ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 1], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 14:46:22.746611"], ["updated_at", "2024-02-16 14:46:22.746611"]]
  â†³ app/use_cases/create_transaction_use_case.rb:44:in `create_transaction'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 422 Unprocessable Entity in 11ms (Views: 0.2ms | ActiveRecord: 2.6ms | Allocations: 4940)


Started POST "/clientes/1/transacoes" for ::1 at 2024-02-16 11:46:30 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007fc6a3831be0>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007fc6a3831be0>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007fc6a3831be0>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.5ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 1], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 14:46:30.748828"], ["updated_at", "2024-02-16 14:46:30.748828"]]
  â†³ app/use_cases/create_transaction_use_case.rb:44:in `create_transaction'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 422 Unprocessable Entity in 22ms (Views: 0.2ms | ActiveRecord: 8.5ms | Allocations: 9993)


Started POST "/clientes/1/transacoes" for ::1 at 2024-02-16 11:52:40 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>10000000, "tipo"=>"c", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.6ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007fc6a36fc0e0>, params: {"valor"=>10000000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007fc6a36fc0e0>, params: {"valor"=>10000000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007fc6a36fc0e0>, params: {"valor"=>10000000, "tipo"=>"c", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.5ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (1.0ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 10000000], ["kind", 0], ["description", "descricao"], ["created_at", "2024-02-16 14:52:40.554777"], ["updated_at", "2024-02-16 14:52:40.554777"]]
  â†³ app/use_cases/create_transaction_use_case.rb:44:in `create_transaction'
  [1m[36mAccount Update (0.6ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance", 9900000], ["updated_at", "2024-02-16 14:52:40.557537"], ["id", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:23:in `block in call'
  [1m[36mTRANSACTION (8.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 200 OK in 28ms (Views: 0.2ms | ActiveRecord: 19.4ms | Allocations: 10258)


Started POST "/clientes/1/transacoes" for ::1 at 2024-02-16 11:52:52 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>9900000, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007fc6a362f040>, params: {"valor"=>9900000, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007fc6a362f040>, params: {"valor"=>9900000, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007fc6a362f040>, params: {"valor"=>9900000, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.4ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 9900000], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 14:52:52.145349"], ["updated_at", "2024-02-16 14:52:52.145349"]]
  â†³ app/use_cases/create_transaction_use_case.rb:44:in `create_transaction'
  [1m[36mAccount Update (0.4ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance", 0], ["updated_at", "2024-02-16 14:52:52.146850"], ["id", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:23:in `block in call'
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 5.1ms | Allocations: 4891)


Started POST "/clientes/1/transacoes" for ::1 at 2024-02-16 11:55:01 -0300
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.8ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f00e16a39a0>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f00e16a39a0>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f00e16a39a0>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.5ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.9ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 1], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 14:55:01.732978"], ["updated_at", "2024-02-16 14:55:01.732978"]]
  â†³ app/use_cases/create_transaction_use_case.rb:44:in `create_transaction'
  [1m[36mAccount Update (0.5ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance", -1], ["updated_at", "2024-02-16 14:55:01.735907"], ["id", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:23:in `block in call'
  [1m[36mTRANSACTION (5.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 200 OK in 46ms (Views: 0.2ms | ActiveRecord: 16.2ms | Allocations: 19798)


Started GET "/clientes/1/extrato" for ::1 at 2024-02-16 11:55:21 -0300
Processing by AccountsController#extract as */*
  Parameters: {"account_id"=>"1"}
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/accounts_controller.rb:5:in `extract'
  [1m[36mTransaction Load (0.6ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."account_id" = $1 ORDER BY "transactions"."created_at" DESC LIMIT $2[0m  [["account_id", 1], ["LIMIT", 10]]
  â†³ app/controllers/accounts_controller.rb:15:in `map'
Completed 200 OK in 12ms (Views: 0.8ms | ActiveRecord: 1.0ms | Allocations: 4757)


Started POST "/clientes/1/transacoes" for ::1 at 2024-02-16 11:55:36 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.6ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f00e1131a30>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f00e1131a30>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f00e1131a30>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.5ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 1], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 14:55:36.903327"], ["updated_at", "2024-02-16 14:55:36.903327"]]
  â†³ app/use_cases/create_transaction_use_case.rb:44:in `create_transaction'
  [1m[36mAccount Update (0.4ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance", -2], ["updated_at", "2024-02-16 14:55:36.905016"], ["id", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:23:in `block in call'
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 200 OK in 14ms (Views: 0.2ms | ActiveRecord: 5.7ms | Allocations: 5021)


Started POST "/clientes/1/transacoes" for ::1 at 2024-02-16 11:55:38 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.5ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f00e10f47e8>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f00e10f47e8>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f00e10f47e8>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.5ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.5ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 1], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 14:55:38.821222"], ["updated_at", "2024-02-16 14:55:38.821222"]]
  â†³ app/use_cases/create_transaction_use_case.rb:44:in `create_transaction'
  [1m[36mAccount Update (0.5ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance", -3], ["updated_at", "2024-02-16 14:55:38.822844"], ["id", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:23:in `block in call'
  [1m[36mTRANSACTION (5.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 200 OK in 17ms (Views: 0.2ms | ActiveRecord: 8.4ms | Allocations: 4882)


Started POST "/clientes/1/transacoes" for ::1 at 2024-02-16 11:55:39 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f00e10b98f0>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f00e10b98f0>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f00e10b98f0>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.5ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.5ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 1], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 14:55:39.390002"], ["updated_at", "2024-02-16 14:55:39.390002"]]
  â†³ app/use_cases/create_transaction_use_case.rb:44:in `create_transaction'
  [1m[36mAccount Update (0.5ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance", -4], ["updated_at", "2024-02-16 14:55:39.391786"], ["id", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:23:in `block in call'
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 200 OK in 14ms (Views: 0.2ms | ActiveRecord: 5.6ms | Allocations: 4878)


Started POST "/clientes/1/transacoes" for ::1 at 2024-02-16 11:55:39 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f00e107ed40>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f00e107ed40>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f00e107ed40>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.6ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 1], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 14:55:39.898651"], ["updated_at", "2024-02-16 14:55:39.898651"]]
  â†³ app/use_cases/create_transaction_use_case.rb:44:in `create_transaction'
  [1m[36mAccount Update (0.4ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance", -5], ["updated_at", "2024-02-16 14:55:39.900629"], ["id", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:23:in `block in call'
  [1m[36mTRANSACTION (3.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 200 OK in 14ms (Views: 0.2ms | ActiveRecord: 5.5ms | Allocations: 4856)


  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (57.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "rinha_database"[0m
  [1m[35m (51.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "rinha_database_test"[0m
Started GET "/clientes/1/extrato" for 127.0.0.1 at 2024-02-16 12:06:28 -0300
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AccountsController#extract as */*
  Parameters: {"account_id"=>"1", "account"=>{}}
  [1m[36mAccount Load (0.6ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/accounts_controller.rb:5:in `extract'
  [1m[36mTransaction Load (0.7ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."account_id" = $1 ORDER BY "transactions"."created_at" DESC LIMIT $2[0m  [["account_id", 1], ["LIMIT", 10]]
  â†³ app/controllers/accounts_controller.rb:15:in `map'
Completed 200 OK in 26ms (Views: 0.3ms | ActiveRecord: 6.7ms | Allocations: 12324)


Started GET "/clientes/1/extrato" for 127.0.0.1 at 2024-02-16 12:06:30 -0300
Processing by AccountsController#extract as */*
  Parameters: {"account_id"=>"1", "account"=>{}}
  [1m[36mAccount Load (0.5ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/accounts_controller.rb:5:in `extract'
  [1m[36mTransaction Load (0.4ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."account_id" = $1 ORDER BY "transactions"."created_at" DESC LIMIT $2[0m  [["account_id", 1], ["LIMIT", 10]]
  â†³ app/controllers/accounts_controller.rb:15:in `map'
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.9ms | Allocations: 1370)


Started GET "/clientes/1/extrato" for 127.0.0.1 at 2024-02-16 12:06:31 -0300
Processing by AccountsController#extract as */*
  Parameters: {"account_id"=>"1", "account"=>{}}
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/accounts_controller.rb:5:in `extract'
  [1m[36mTransaction Load (0.4ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."account_id" = $1 ORDER BY "transactions"."created_at" DESC LIMIT $2[0m  [["account_id", 1], ["LIMIT", 10]]
  â†³ app/controllers/accounts_controller.rb:15:in `map'
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.9ms | Allocations: 1315)


Started GET "/clientes/1/extrato" for 127.0.0.1 at 2024-02-16 12:06:31 -0300
Processing by AccountsController#extract as */*
  Parameters: {"account_id"=>"1", "account"=>{}}
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/accounts_controller.rb:5:in `extract'
  [1m[36mTransaction Load (0.4ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."account_id" = $1 ORDER BY "transactions"."created_at" DESC LIMIT $2[0m  [["account_id", 1], ["LIMIT", 10]]
  â†³ app/controllers/accounts_controller.rb:15:in `map'
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.7ms | Allocations: 1299)


Started GET "/clientes/1/extrato" for 127.0.0.1 at 2024-02-16 12:06:33 -0300
Processing by AccountsController#extract as */*
  Parameters: {"account_id"=>"1", "account"=>{}}
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/accounts_controller.rb:5:in `extract'
  [1m[36mTransaction Load (0.3ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."account_id" = $1 ORDER BY "transactions"."created_at" DESC LIMIT $2[0m  [["account_id", 1], ["LIMIT", 10]]
  â†³ app/controllers/accounts_controller.rb:15:in `map'
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.7ms | Allocations: 1299)


Started GET "/clientes/1/extrato" for 127.0.0.1 at 2024-02-16 12:06:36 -0300
Processing by AccountsController#extract as */*
  Parameters: {"account_id"=>"1", "account"=>{}}
  [1m[36mAccount Load (0.5ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/accounts_controller.rb:5:in `extract'
  [1m[36mTransaction Load (0.4ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."account_id" = $1 ORDER BY "transactions"."created_at" DESC LIMIT $2[0m  [["account_id", 1], ["LIMIT", 10]]
  â†³ app/controllers/accounts_controller.rb:15:in `map'
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.8ms | Allocations: 1299)


Started POST "/clientes/1/transacoes" for 127.0.0.1 at 2024-02-16 12:08:05 -0300
Error occurred while parsing request parameters.
Contents:

{"valor"=>1, "tipo"=>"d", "descricao"=>"descricao"}
Processing by TransactionsController#create as */*
Completed 422 Unprocessable Entity in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 378)


Started POST "/clientes/1/transacoes" for 127.0.0.1 at 2024-02-16 12:08:46 -0300
Error occurred while parsing request parameters.
Contents:

{"valor"=>1, "tipo"=>"d", "descricao"=>"descricao"}
Processing by TransactionsController#create as */*
Completed 422 Unprocessable Entity in 2ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 1109)


Started POST "/clientes/1/transacoes" for ::1 at 2024-02-16 12:08:58 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:32:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93ee5708>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93ee5708>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93ee5708>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.5ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.8ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 1], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 15:09:02.754792"], ["updated_at", "2024-02-16 15:09:02.754792"]]
  â†³ app/use_cases/create_transaction_use_case.rb:44:in `create_transaction'
  [1m[36mAccount Update (0.6ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance", -1], ["updated_at", "2024-02-16 15:09:02.759355"], ["id", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:23:in `block in call'
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 200 OK in 4145ms (Views: 0.2ms | ActiveRecord: 12.0ms | Allocations: 30183)


Started POST "/clientes/1/transacoes" for 127.0.0.1 at 2024-02-16 12:10:49 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:32:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93cca9f0>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93cca9f0>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93cca9f0>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.5ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.4ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 1], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 15:10:53.289249"], ["updated_at", "2024-02-16 15:10:53.289249"]]
  â†³ app/use_cases/create_transaction_use_case.rb:44:in `create_transaction'
  [1m[36mAccount Update (0.5ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance", -2], ["updated_at", "2024-02-16 15:10:53.290718"], ["id", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:23:in `block in call'
  [1m[36mTRANSACTION (8.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 200 OK in 4299ms (Views: 0.2ms | ActiveRecord: 11.1ms | Allocations: 14257)


Started POST "/clientes/1/transacoes" for 127.0.0.1 at 2024-02-16 12:11:03 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93baef80>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93baef80>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93baef80>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.6ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 1], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 15:11:03.499394"], ["updated_at", "2024-02-16 15:11:03.499394"]]
  â†³ app/use_cases/create_transaction_use_case.rb:44:in `create_transaction'
  [1m[36mAccount Update (0.4ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance", -3], ["updated_at", "2024-02-16 15:11:03.501711"], ["id", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:23:in `block in call'
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 200 OK in 25ms (Views: 0.2ms | ActiveRecord: 20.6ms | Allocations: 10419)


Started POST "/clientes/1/transacoes" for 127.0.0.1 at 2024-02-16 12:11:04 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5dc1abd788>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5dc1abd788>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5dc1abd788>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.5ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 1], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 15:11:04.164316"], ["updated_at", "2024-02-16 15:11:04.164316"]]
  â†³ app/use_cases/create_transaction_use_case.rb:44:in `create_transaction'
  [1m[36mAccount Update (0.5ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance", -4], ["updated_at", "2024-02-16 15:11:04.165957"], ["id", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:23:in `block in call'
  [1m[36mTRANSACTION (8.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 200 OK in 19ms (Views: 0.2ms | ActiveRecord: 10.8ms | Allocations: 4892)


Started POST "/clientes/1/transacoes" for 127.0.0.1 at 2024-02-16 12:11:04 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5dc053ef88>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5dc053ef88>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5dc053ef88>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.5ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 1], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 15:11:04.746136"], ["updated_at", "2024-02-16 15:11:04.746136"]]
  â†³ app/use_cases/create_transaction_use_case.rb:44:in `create_transaction'
  [1m[36mAccount Update (0.5ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance", -5], ["updated_at", "2024-02-16 15:11:04.747810"], ["id", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:23:in `block in call'
  [1m[36mTRANSACTION (8.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 200 OK in 22ms (Views: 0.1ms | ActiveRecord: 11.3ms | Allocations: 4883)


Started POST "/clientes/1/transacoes" for 127.0.0.1 at 2024-02-16 12:11:05 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5dc004cfe8>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5dc004cfe8>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5dc004cfe8>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.5ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.5ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 1], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 15:11:05.242428"], ["updated_at", "2024-02-16 15:11:05.242428"]]
  â†³ app/use_cases/create_transaction_use_case.rb:44:in `create_transaction'
  [1m[36mAccount Update (0.7ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance", -6], ["updated_at", "2024-02-16 15:11:05.244420"], ["id", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:23:in `block in call'
  [1m[36mTRANSACTION (8.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 200 OK in 20ms (Views: 0.1ms | ActiveRecord: 11.3ms | Allocations: 4856)


Started POST "/clientes/1/transacoes" for 127.0.0.1 at 2024-02-16 12:11:07 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5dc0021410>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5dc0021410>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5dc0021410>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.6ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 1], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 15:11:07.162341"], ["updated_at", "2024-02-16 15:11:07.162341"]]
  â†³ app/use_cases/create_transaction_use_case.rb:44:in `create_transaction'
  [1m[36mAccount Update (0.5ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance", -7], ["updated_at", "2024-02-16 15:11:07.163979"], ["id", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:23:in `block in call'
  [1m[36mTRANSACTION (8.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 200 OK in 18ms (Views: 0.2ms | ActiveRecord: 11.1ms | Allocations: 4856)


Started POST "/clientes/1/transacoes" for 127.0.0.1 at 2024-02-16 12:11:07 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93fc2770>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93fc2770>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93fc2770>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.5ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.5ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 1], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 15:11:07.850518"], ["updated_at", "2024-02-16 15:11:07.850518"]]
  â†³ app/use_cases/create_transaction_use_case.rb:44:in `create_transaction'
  [1m[36mAccount Update (0.5ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance", -8], ["updated_at", "2024-02-16 15:11:07.852229"], ["id", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:23:in `block in call'
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 5.3ms | Allocations: 4856)


Started POST "/clientes/1/transacoes" for 127.0.0.1 at 2024-02-16 12:11:09 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93f973b8>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93f973b8>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93f973b8>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.5ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.4ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 1], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 15:11:09.051304"], ["updated_at", "2024-02-16 15:11:09.051304"]]
  â†³ app/use_cases/create_transaction_use_case.rb:44:in `create_transaction'
  [1m[36mAccount Update (0.4ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance", -9], ["updated_at", "2024-02-16 15:11:09.052865"], ["id", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:23:in `block in call'
  [1m[36mTRANSACTION (8.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 200 OK in 18ms (Views: 0.2ms | ActiveRecord: 10.9ms | Allocations: 4856)


Started POST "/clientes/1/transacoes" for 127.0.0.1 at 2024-02-16 12:11:10 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93f30a50>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93f30a50>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93f30a50>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.5ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.4ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 1], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 15:11:10.258371"], ["updated_at", "2024-02-16 15:11:10.258371"]]
  â†³ app/use_cases/create_transaction_use_case.rb:44:in `create_transaction'
  [1m[36mAccount Update (0.4ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance", -10], ["updated_at", "2024-02-16 15:11:10.259801"], ["id", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:23:in `block in call'
  [1m[36mTRANSACTION (3.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 200 OK in 14ms (Views: 0.2ms | ActiveRecord: 5.8ms | Allocations: 4856)


Started POST "/clientes/1/transacoes" for 127.0.0.1 at 2024-02-16 12:11:11 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93f000a8>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93f000a8>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93f000a8>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.5ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 1], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 15:11:11.092300"], ["updated_at", "2024-02-16 15:11:11.092300"]]
  â†³ app/use_cases/create_transaction_use_case.rb:44:in `create_transaction'
  [1m[36mAccount Update (0.4ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance", -11], ["updated_at", "2024-02-16 15:11:11.094055"], ["id", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:23:in `block in call'
  [1m[36mTRANSACTION (8.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 200 OK in 18ms (Views: 0.1ms | ActiveRecord: 10.7ms | Allocations: 4857)


Started POST "/clientes/1/transacoes" for 127.0.0.1 at 2024-02-16 12:11:11 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93deb2a8>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93deb2a8>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93deb2a8>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.5ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 1], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 15:11:11.661678"], ["updated_at", "2024-02-16 15:11:11.661678"]]
  â†³ app/use_cases/create_transaction_use_case.rb:44:in `create_transaction'
  [1m[36mAccount Update (0.4ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance", -12], ["updated_at", "2024-02-16 15:11:11.663680"], ["id", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:23:in `block in call'
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 5.4ms | Allocations: 4856)


Started POST "/clientes/1/transacoes" for 127.0.0.1 at 2024-02-16 12:11:12 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93d61cb0>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93d61cb0>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93d61cb0>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.5ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.4ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 1], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 15:11:12.163192"], ["updated_at", "2024-02-16 15:11:12.163192"]]
  â†³ app/use_cases/create_transaction_use_case.rb:44:in `create_transaction'
  [1m[36mAccount Update (0.6ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance", -13], ["updated_at", "2024-02-16 15:11:12.165110"], ["id", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:23:in `block in call'
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 200 OK in 14ms (Views: 0.1ms | ActiveRecord: 5.6ms | Allocations: 4856)


Started POST "/clientes/1/transacoes" for 127.0.0.1 at 2024-02-16 12:11:12 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93d3b1c8>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93d3b1c8>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93d3b1c8>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.5ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.5ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 1], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 15:11:12.636673"], ["updated_at", "2024-02-16 15:11:12.636673"]]
  â†³ app/use_cases/create_transaction_use_case.rb:44:in `create_transaction'
  [1m[36mAccount Update (0.5ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance", -14], ["updated_at", "2024-02-16 15:11:12.638409"], ["id", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:23:in `block in call'
  [1m[36mTRANSACTION (6.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 200 OK in 18ms (Views: 0.3ms | ActiveRecord: 9.0ms | Allocations: 4856)


Started POST "/clientes/1/transacoes" for 127.0.0.1 at 2024-02-16 12:11:13 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93cccdb8>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93cccdb8>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93cccdb8>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.5ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 1], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 15:11:13.009509"], ["updated_at", "2024-02-16 15:11:13.009509"]]
  â†³ app/use_cases/create_transaction_use_case.rb:44:in `create_transaction'
  [1m[36mAccount Update (0.5ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance", -15], ["updated_at", "2024-02-16 15:11:13.011071"], ["id", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:23:in `block in call'
  [1m[36mTRANSACTION (8.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 200 OK in 19ms (Views: 0.2ms | ActiveRecord: 10.8ms | Allocations: 4856)


Started POST "/clientes/1/transacoes" for 127.0.0.1 at 2024-02-16 12:11:13 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93ca25e0>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93ca25e0>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93ca25e0>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.5ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.5ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 1], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 15:11:13.395466"], ["updated_at", "2024-02-16 15:11:13.395466"]]
  â†³ app/use_cases/create_transaction_use_case.rb:44:in `create_transaction'
  [1m[36mAccount Update (1.7ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance", -16], ["updated_at", "2024-02-16 15:11:13.397630"], ["id", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:23:in `block in call'
  [1m[36mTRANSACTION (8.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 200 OK in 22ms (Views: 0.1ms | ActiveRecord: 12.5ms | Allocations: 4856)


Started POST "/clientes/1/transacoes" for 127.0.0.1 at 2024-02-16 12:11:13 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93c40408>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93c40408>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93c40408>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.4ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 1], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 15:11:13.759672"], ["updated_at", "2024-02-16 15:11:13.759672"]]
  â†³ app/use_cases/create_transaction_use_case.rb:44:in `create_transaction'
  [1m[36mAccount Update (0.5ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance", -17], ["updated_at", "2024-02-16 15:11:13.761164"], ["id", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:23:in `block in call'
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 5.4ms | Allocations: 4856)


Started POST "/clientes/1/transacoes" for 127.0.0.1 at 2024-02-16 12:11:14 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93be7510>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93be7510>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93be7510>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.5ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 1], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 15:11:14.055316"], ["updated_at", "2024-02-16 15:11:14.055316"]]
  â†³ app/use_cases/create_transaction_use_case.rb:44:in `create_transaction'
  [1m[36mAccount Update (0.5ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance", -18], ["updated_at", "2024-02-16 15:11:14.056877"], ["id", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:23:in `block in call'
  [1m[36mTRANSACTION (8.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 200 OK in 18ms (Views: 0.1ms | ActiveRecord: 10.9ms | Allocations: 4856)


Started POST "/clientes/1/transacoes" for 127.0.0.1 at 2024-02-16 12:11:14 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93bbaa38>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93bbaa38>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93bbaa38>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.5ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.5ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 1], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 15:11:14.388826"], ["updated_at", "2024-02-16 15:11:14.388826"]]
  â†³ app/use_cases/create_transaction_use_case.rb:44:in `create_transaction'
  [1m[36mAccount Update (0.6ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance", -19], ["updated_at", "2024-02-16 15:11:14.392554"], ["id", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:23:in `block in call'
  [1m[36mTRANSACTION (8.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 200 OK in 24ms (Views: 0.2ms | ActiveRecord: 11.5ms | Allocations: 4856)


Started POST "/clientes/1/transacoes" for 127.0.0.1 at 2024-02-16 12:11:14 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93c378d0>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93c378d0>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93c378d0>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.5ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.7ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 1], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 15:11:14.726431"], ["updated_at", "2024-02-16 15:11:14.726431"]]
  â†³ app/use_cases/create_transaction_use_case.rb:44:in `create_transaction'
  [1m[36mAccount Update (0.6ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance", -20], ["updated_at", "2024-02-16 15:11:14.732026"], ["id", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:23:in `block in call'
  [1m[36mTRANSACTION (6.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 200 OK in 32ms (Views: 0.2ms | ActiveRecord: 9.8ms | Allocations: 4856)


Started POST "/clientes/1/transacoes" for 127.0.0.1 at 2024-02-16 12:11:15 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93ecc258>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93ecc258>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5d93ecc258>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.5ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.5ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 1], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 15:11:15.676328"], ["updated_at", "2024-02-16 15:11:15.676328"]]
  â†³ app/use_cases/create_transaction_use_case.rb:44:in `create_transaction'
  [1m[36mAccount Update (0.6ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance", -21], ["updated_at", "2024-02-16 15:11:15.679689"], ["id", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:23:in `block in call'
  [1m[36mTRANSACTION (8.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 200 OK in 30ms (Views: 1.7ms | ActiveRecord: 11.3ms | Allocations: 4856)


Started POST "/clientes/1/transacoes" for 127.0.0.1 at 2024-02-16 12:11:16 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5dc1ade758>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5dc1ade758>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5dc1ade758>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.5ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.4ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 1], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 15:11:16.113075"], ["updated_at", "2024-02-16 15:11:16.113075"]]
  â†³ app/use_cases/create_transaction_use_case.rb:44:in `create_transaction'
  [1m[36mAccount Update (0.5ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance", -22], ["updated_at", "2024-02-16 15:11:16.114570"], ["id", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:23:in `block in call'
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 5.2ms | Allocations: 4857)


Started POST "/clientes/1/transacoes" for 127.0.0.1 at 2024-02-16 12:11:16 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5dc206ade8>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5dc206ade8>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5dc206ade8>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.5ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.4ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 1], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 15:11:16.485198"], ["updated_at", "2024-02-16 15:11:16.485198"]]
  â†³ app/use_cases/create_transaction_use_case.rb:44:in `create_transaction'
  [1m[36mAccount Update (0.4ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance", -23], ["updated_at", "2024-02-16 15:11:16.486738"], ["id", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:23:in `block in call'
  [1m[36mTRANSACTION (8.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 200 OK in 19ms (Views: 0.2ms | ActiveRecord: 10.9ms | Allocations: 4857)


Started POST "/clientes/1/transacoes" for 127.0.0.1 at 2024-02-16 12:11:16 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5dc1ac9d08>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5dc1ac9d08>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5dc1ac9d08>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.5ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.6ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 1], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 15:11:16.943872"], ["updated_at", "2024-02-16 15:11:16.943872"]]
  â†³ app/use_cases/create_transaction_use_case.rb:44:in `create_transaction'
  [1m[36mAccount Update (0.6ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance", -24], ["updated_at", "2024-02-16 15:11:16.945993"], ["id", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:23:in `block in call'
  [1m[36mTRANSACTION (3.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 200 OK in 15ms (Views: 0.1ms | ActiveRecord: 6.3ms | Allocations: 4856)


Started POST "/clientes/1/transacoes" for 127.0.0.1 at 2024-02-16 12:11:17 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5dc19c4d18>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5dc19c4d18>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5dc19c4d18>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.4ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 1], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 15:11:17.359867"], ["updated_at", "2024-02-16 15:11:17.359867"]]
  â†³ app/use_cases/create_transaction_use_case.rb:44:in `create_transaction'
  [1m[36mAccount Update (0.4ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance", -25], ["updated_at", "2024-02-16 15:11:17.361609"], ["id", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:23:in `block in call'
  [1m[36mTRANSACTION (8.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 200 OK in 19ms (Views: 0.1ms | ActiveRecord: 10.9ms | Allocations: 4856)


Started POST "/clientes/1/transacoes" for 127.0.0.1 at 2024-02-16 12:11:17 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5dc0074bb0>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5dc0074bb0>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5dc0074bb0>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.5ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.4ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 1], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 15:11:17.783819"], ["updated_at", "2024-02-16 15:11:17.783819"]]
  â†³ app/use_cases/create_transaction_use_case.rb:44:in `create_transaction'
  [1m[36mAccount Update (0.4ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance", -26], ["updated_at", "2024-02-16 15:11:17.785306"], ["id", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:23:in `block in call'
  [1m[36mTRANSACTION (8.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 200 OK in 19ms (Views: 0.2ms | ActiveRecord: 11.2ms | Allocations: 4857)


Started POST "/clientes/1/transacoes" for 127.0.0.1 at 2024-02-16 12:11:18 -0300
Processing by TransactionsController#create as */*
  Parameters: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "account_id"=>"1", "transaction"=>{}}
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/transactions_controller.rb:30:in `load_account'
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5dc00514d0>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5dc00514d0>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
[31mUnpermitted parameters: :account_id, :transaction. Context: { controller: TransactionsController, action: create, request: #<ActionDispatch::Request:0x00007f5dc00514d0>, params: {"valor"=>1, "tipo"=>"d", "descricao"=>"descricao", "controller"=>"transactions", "action"=>"create", "account_id"=>"1", "transaction"=>{}} }[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.5ms)[0m  [1m[37mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:17:in `block in call'
  [1m[36mTransaction Create (0.5ms)[0m  [1m[32mINSERT INTO "transactions" ("account_id", "amount", "kind", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["account_id", 1], ["amount", 1], ["kind", 1], ["description", "descricao"], ["created_at", "2024-02-16 15:11:18.254395"], ["updated_at", "2024-02-16 15:11:18.254395"]]
  â†³ app/use_cases/create_transaction_use_case.rb:44:in `create_transaction'
  [1m[36mAccount Update (0.5ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = $1, "updated_at" = $2 WHERE "accounts"."id" = $3[0m  [["balance", -27], ["updated_at", "2024-02-16 15:11:18.256176"], ["id", 1]]
  â†³ app/use_cases/create_transaction_use_case.rb:23:in `block in call'
  [1m[36mTRANSACTION (8.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/use_cases/create_transaction_use_case.rb:16:in `call'
Completed 200 OK in 20ms (Views: 0.1ms | ActiveRecord: 11.6ms | Allocations: 4856)


Started GET "/clientes/1/extrato" for 127.0.0.1 at 2024-02-16 12:11:21 -0300
Processing by AccountsController#extract as */*
  Parameters: {"account_id"=>"1", "account"=>{}}
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/accounts_controller.rb:5:in `extract'
  [1m[36mTransaction Load (0.5ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."account_id" = $1 ORDER BY "transactions"."created_at" DESC LIMIT $2[0m  [["account_id", 1], ["LIMIT", 10]]
  â†³ app/controllers/accounts_controller.rb:15:in `map'
Completed 200 OK in 5ms (Views: 0.5ms | ActiveRecord: 0.9ms | Allocations: 2630)


